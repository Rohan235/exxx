{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-6e8e0edd5b9ef260.js","src/js/controllerPlanner.js","node_modules/@parcel/runtime-js/lib/runtime-5c07814725e6cc35.js","src/js/views/plannerView.js","src/js/views/plannerPaginationView.js","src/js/views/timeView.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"g04zn\\\":\\\"mealPlanner.f14edfe0.js\\\",\\\"eyyUD\\\":\\\"icons.7bb96926.svg\\\",\\\"1J7OZ\\\":\\\"mealPlanner.ef01a64d.js\\\",\\\"9df1U\\\":\\\"mealPlanner.b75d3415.js\\\"}\"));","import * as model from './model.js';\nimport recipeView from './views/recipeView.js';\nimport plannerView from './views/plannerView.js';\nimport plannerPaginationView from './views/plannerPaginationView.js';\nimport timeView from './views/timeView.js';\nimport themeView from './views/themeView.js';\n\nimport 'core-js/stable';\nimport 'regenerator-runtime/runtime';\n\nconst controlRecipesPlanner = async function () {\n  try {\n    const id = window.location.hash.slice(1);\n\n    if (!id) return;\n    recipeView.scrollToRecipe();\n    recipeView.renderSpinner();\n\n    // 1) Update results view to mark selected search result\n    plannerView.render(model.state.planner);\n\n    // 2) Loading recipe\n    await model.loadRecipe(id);\n\n    // 3) Rendering recipe\n    recipeView.render(model.state.recipe);\n  } catch (err) {\n    console.error(`${err.message} ⚠⚠⚠`);\n    recipeView.renderError();\n  }\n\n  // rendering the recipe without the nutritional data\n  if (!model.state.recipe.calories) {\n    recipeView.render(model.state.recipe);\n  }\n};\n\nconst controlServings = function (newServings) {\n  model.updateServings(newServings);\n  recipeView.update(model.state.recipe);\n};\n\nconst controlAddToShoppingList = function (ingredient) {\n  model.addIngredient(ingredient);\n};\n\nconst controlPlannerUI = function () {\n  model.changeActive(0);\n  plannerView.render(model.state.planner);\n};\n\nconst controlResetPlanner = function () {\n  model.clearPlanner();\n  plannerView.render(model.state.planner);\n};\n\nconst controlDeletePlanned = function (day, meal) {\n  model.deleteMeal(day, meal);\n  plannerView.clearCell(day, meal);\n};\n\nconst controlRenderBtns = function () {\n  model.changeWeek(1);\n  plannerPaginationView.render(model.state.planner);\n  plannerView.render(model.state.planner);\n};\n\nconst controlChangeWeek = function (goToWeek = 1) {\n  model.changeWeek(goToWeek);\n  plannerPaginationView.render(model.state.planner);\n  plannerView.render(model.state.planner);\n};\n\nconst controlDate = function () {\n  timeView.render(model.state.planner);\n};\n\nconst controlActiveDay = function (active) {\n  model.changeActive(active);\n  plannerView.render(model.state.planner);\n};\n\nconst controlTheme = function (actualTheme) {\n  let newTheme = 'light';\n  if (actualTheme === 'light') newTheme = 'dark';\n  model.changeTheme(newTheme);\n  themeView.setTheme(newTheme);\n};\n\nconst initTheme = function () {\n  themeView.setTheme(model.state.theme);\n};\n\nconst init = function () {\n  recipeView.addHandlerRender(controlRecipesPlanner);\n  recipeView.addHandlerUpdateServings(controlServings);\n  recipeView.addHandlerAddIngredient(controlAddToShoppingList);\n  plannerView.addHandlerLoadPlanner(controlPlannerUI);\n  plannerView.addHandlerResetPlanner(controlResetPlanner);\n  plannerView.addHandlerDeletePlanned(controlDeletePlanned);\n  plannerView.addHandlerSubmitWeekday(controlActiveDay);\n  plannerView.addHandlerDetectChange();\n  plannerPaginationView.addHandlerRenderBtns(controlRenderBtns);\n  plannerPaginationView.addHandlerChangeWeek(controlChangeWeek);\n  timeView.addHandlerRenderDate(controlDate);\n  themeView.addHandlerChangeTheme(controlTheme);\n  initTheme();\n};\ninit();\n","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"eyyUD\")).toString();","import icons from 'url:../../img/icons.svg';\nimport View from './View';\nimport { maxFourWords } from '../helpers.js';\n\nclass PlannerView extends View {\n  _parentElement = document.querySelector('.planner__grid');\n\n  addHandlerLoadPlanner(handler) {\n    window.addEventListener('load', handler);\n  }\n\n  addHandlerResetPlanner(handler) {\n    document\n      .querySelector('.page-options__btn--reset-calendar')\n      .addEventListener('click', handler);\n  }\n\n  addHandlerDeletePlanned(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      const btn = e.target.closest('.planned__remove-btn');\n\n      if (!btn) return;\n      const day = btn.closest('.planned').dataset.positionI;\n      const meal = btn.closest('.planned').dataset.positionJ;\n      // console.log(day, meal);\n      handler(day, meal);\n    });\n  }\n\n  addHandlerDetectChange() {\n    this._parentElement\n      .closest('.section__planner')\n      .querySelector('.planner__form')\n      .addEventListener('input', function (e) {\n        this.querySelector('.planner__submit').click();\n      });\n  }\n\n  addHandlerSubmitWeekday(handler) {\n    this._parentElement\n      .closest('.section__planner')\n      .querySelector('.planner__form')\n      .addEventListener('submit', function (e) {\n        console.log('triggered');\n        e.preventDefault();\n        const active = +this.querySelector('#weekday').value;\n        console.log(active);\n        handler(active);\n      });\n  }\n\n  clearCell(i, j) {\n    Array.from(this._parentElement.getElementsByClassName(`planned`)).find(\n      el => el.dataset.positionI === i && el.dataset.positionJ === j\n    ).innerHTML = '';\n  }\n\n  _generateMarkup() {\n    const active = this._data.active;\n    console.log(active);\n    return this._data[this._data.page === 1 ? 'currentWeek' : 'nextWeek']\n      .map((day, i) =>\n        day\n          .map((meal, j) => this._generatePlannerCell(i, j, meal, active))\n          .join('')\n      )\n      .join('');\n  }\n\n  _generatePlannerCell(i, j, meal, active) {\n    const id = window.location.hash;\n    return `\n      <div class=\"planner__recipe planner__recipe--${i + 1}${j + 1} planned ${\n      i === active ? 'planner__recipe--active' : ''\n    }\" data-position-i=\"${i}\" data-position-j=\"${j}\">\n        ${\n          !meal\n            ? ''\n            : `\n        <a class=\"planned__link ${\n          id === meal.id ? 'planned__link--active' : ''\n        }\" href=\"${meal.id}\">\n            <figure class=\"planned__fig\">\n                <img src=\"${meal.img}\" alt=\"${meal.title}\" />\n            </figure>\n            <h4 class=\"planned__title\">${maxFourWords(meal.title)}</h4>\n            \n        </a>\n        <div class=\"planned__remove-btn\" data-id=${meal.id}>\n              <svg>\n                <use href=\"${icons}#icon-bin\"></use>\n              </svg>\n        </div>\n        `\n        }   \n      </div>\n      `;\n  }\n}\n\nexport default new PlannerView();\n","import icons from 'url:../../img/icons.svg';\nimport { clearIngredients } from '../model';\nimport View from './View';\n\nclass PlannerPaginationView extends View {\n  _parentElement = document.querySelector('.planner__pagination');\n\n  addHandlerRenderBtns(handler) {\n    window.addEventListener('load', handler);\n  }\n\n  addHandlerChangeWeek(handler) {\n    this._parentElement.addEventListener('click', function (e) {\n      const btn = e.target.closest('.btn--week');\n      if (!btn) return;\n\n      const goToWeek = +btn.dataset.goToWeek;\n      handler(goToWeek);\n    });\n  }\n\n  _generateMarkup() {\n    const currentPage = this._data.page;\n    if (currentPage === 1)\n      return `\n      <button class=\"btn--week pagination__btn--next\" data-go-to-week=\"${\n        currentPage + 1\n      }\">\n        <span>Next week</span>\n        <svg class=\"search__icon\">\n          <use href=\"${icons}#icon-arrow-right\"></use>\n        </svg>\n      </button>\n      `;\n    if (currentPage === 2) {\n      return `\n      <button class=\"btn--week pagination__btn--prev\" data-go-to-week=\"${\n        currentPage - 1\n      }\">\n        <svg class=\"search__icon\">\n          <use href=\"${icons}#icon-arrow-left\"></use>\n        </svg>\n        <span>Current week</span>\n      </button>\n      `;\n    }\n  }\n}\n\nexport default new PlannerPaginationView();\n","import View from './View';\nimport { formatDate } from '../helpers.js';\n\nclass TimeView extends View {\n  _parentElement = document.querySelector('.planner__date');\n\n  addHandlerRenderDate(handler) {\n    window.addEventListener('load', handler);\n  }\n\n  _generateMarkup() {\n    return `\n    <div class=\"planner__date-label\">\n        <div class=\"planner__date-text\">${formatDate()}</div>\n    </div>\n    `;\n  }\n}\n\nexport default new TimeView();\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$0a1a6345810ead87$exports","URL","resolve","url","toString","$0888f3d0c5fdb3cd$var$PlannerView","$4YTqJ","default","_parentElement","document","querySelector","addHandlerLoadPlanner","handler","window","addEventListener","addHandlerResetPlanner","addHandlerDeletePlanned","this","e","btn","target","closest","day","dataset","positionI","meal","positionJ","addHandlerDetectChange","click","addHandlerSubmitWeekday","console","log","preventDefault","active","value","clearCell","j","Array","from","getElementsByClassName","find","el","innerHTML","_generateMarkup","_data","page","map","_generatePlannerCell","join","location","hash","img","title","$ge6e3","maxFourWords","$parcel$interopDefault","$0888f3d0c5fdb3cd$export$2e2bcd8739ae039","$6e328d9dada8e83c$var$PlannerPaginationView","addHandlerRenderBtns","addHandlerChangeWeek","goToWeek","currentPage","$6e328d9dada8e83c$export$2e2bcd8739ae039","$9e007c16177ba03f$var$TimeView","addHandlerRenderDate","formatDate","$9e007c16177ba03f$export$2e2bcd8739ae039","$c619341d4dd6042f$var$controlRecipesPlanner","async","slice","$hY7mJ","scrollToRecipe","renderSpinner","render","$1is5Y","state","planner","loadRecipe","recipe","err","error","message","renderError","calories","$c619341d4dd6042f$var$controlServings","newServings","updateServings","update","$c619341d4dd6042f$var$controlAddToShoppingList","ingredient","addIngredient","$c619341d4dd6042f$var$controlPlannerUI","changeActive","$c619341d4dd6042f$var$controlResetPlanner","clearPlanner","$c619341d4dd6042f$var$controlDeletePlanned","deleteMeal","$c619341d4dd6042f$var$controlRenderBtns","changeWeek","$c619341d4dd6042f$var$controlChangeWeek","$c619341d4dd6042f$var$controlDate","$c619341d4dd6042f$var$controlActiveDay","$c619341d4dd6042f$var$controlTheme","actualTheme","newTheme","changeTheme","$5smQv","setTheme","addHandlerRender","addHandlerUpdateServings","addHandlerAddIngredient","addHandlerChangeTheme","theme"],"version":3,"file":"mealPlanner.f14edfe0.js.map"}